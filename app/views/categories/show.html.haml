#loading
  .loader

.pictures-nav
  - if @category.root?
    - breadcrumb :parent_category
  - else
    - breadcrumb :child_category
  = render "layouts/breadcrumbs"
  .links
    = link_to new_picture_path, class: "btn new-picture-link" do
      投稿する

.categories
  %span<> 関連カテゴリー：
  - @category_links.each do |link|
    - if link == @category
      %span.current-category
        = link.name
    - else
      = link_to link.name, category_path(link), class: "category-links"

- if @pictures.present?
  .pictures-actions
    .menu
      = link_to slideshow_category_path(@category, params: {q: @params}), class: "slideshow-link" do
        = icon('fa', 'images')
        %span<>スライドショー
    = search_form_for @q, url: category_path(@category), class: "menu" do |f|
      = f.select( :sorts, { '新着順': 'id DESC', '古い順': 'id ASC', 'お気に入りの多い順': 'favorites_count DESC', 'お気に入りの少ない順': 'favorites_count ASC' }, { selected: params[:q][:sorts] }, { onchange: 'this.form.submit()' } )

.pictures-index
  - if @pictures.present?
    - @pictures.each do |picture|
      .picture
        - if @category.root?
          - url = "/categories/parent/#{picture.category.parent.id}/#{picture.id}"
        - else
          - url = "/categories/#{picture.category.id}/#{picture.id}"
        = link_to url do
          = image_tag picture.image_url
        .picture-info
          .picture-comments
            = icon('far', 'comment')
            = picture.comments_count
          .picture-favorite{id: "favorite-#{picture.id}"}
            = render partial: "pictures/favorite", locals: { picture: picture }
  - else
    投稿がありません

= paginate @pictures